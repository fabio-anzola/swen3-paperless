@startuml Paperless Microservice Architecture

title Paperless Document Management System - Architecture

skinparam componentStyle rectangle

actor "User" as user

component "Next.js Web\n:3000" as web
component "Spring Boot API\n:4000" as api

queue "Kafka Broker\n:9092" as kafka
component "Kafka UI\n:8080" as kafkaUI

component "OCR Worker\n(consumes ocr)" as ocr
component "GenAI Worker\n(consumes genai-queue)" as genai
cloud "Gemini API" as gemini

cloud "MinIO S3\n:9000 / 9001" as minio
database "PostgreSQL\n:5455" as db
component "pgAdmin\n:5050" as pgadmin

component "Elasticsearch\n:9200" as es
component "Kibana\n:5601" as kibana

user --> web : HTTP
web --> api : REST /api/v1
api --> minio : Upload/Download
api --> db : JDBC
api --> kafka : Publish 'ocr'
kafka --> ocr : Consume 'ocr'
ocr --> minio : Read object
ocr --> kafka : Publish 'genai-queue'
kafka --> genai : Consume 'genai-queue'
genai --> gemini : Summarize
genai --> es : Index summaries
genai --> kafka : Publish 'result'
kafka --> api : Consume 'result'
api --> es : Search / Query
pgadmin --> db : Admin
kafkaUI --> kafka : Monitor
kibana --> es : Visualize

@enduml
